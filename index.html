<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eFootball League</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}

header {
  background: linear-gradient(90deg,#5a0d7c,#8e2de2);
  color: #fff;
  text-align: center;
  padding: 15px;
  font-size: 22px;
}

nav {
  display: flex;
  background: #fff;
  border-bottom: 2px solid #ddd;
}

nav button {
  flex: 1;
  padding: 12px;
  border: none;
  background: none;
  font-size: 16px;
}

nav button.active {
  border-bottom: 4px solid purple;
  color: purple;
  font-weight: bold;
}

.page {
  display: none;
  padding: 10px;
}

.page.active {
  display: block;
}

.match {
  background: #fff;
  padding: 8px;
  margin-bottom: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-radius: 6px;
}

.match input {
  width: 40px;
  text-align: center;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
  font-size: 14px;
}

th, td {
  padding: 6px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}

.champ {
  background: #c6f6d5;
}

.relegate {
  background: #fed7d7;
}

.reset {
  background: red;
  color: #fff;
  border: none;
  padding: 12px;
  width: 100%;
  border-radius: 8px;
  font-size: 16px;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<header>üèÜ eFootball League</header>

<nav>
  <button onclick="showPage('program')" class="active">‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
  <button onclick="showPage('table')">‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
  <button onclick="showPage('scorer')">Top Scorer</button>
</nav>

<div class="page active" id="program">
  <button class="reset" onclick="resetAll()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  <div id="programList"></div>
</div>

<div class="page" id="table">
  <table>
    <thead>
      <tr>
        <th>#</th><th>‡∏ó‡∏µ‡∏°</th><th>P</th><th>W</th><th>D</th><th>L</th>
        <th>GF</th><th>GA</th><th>GD</th><th>Pts</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<div class="page" id="scorer">
  <table>
    <thead>
      <tr><th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th><th>‡∏ó‡∏µ‡∏°</th><th>‡∏õ‡∏£‡∏∞‡∏ï‡∏π</th></tr>
    </thead>
    <tbody id="scorerBody"></tbody>
  </table>
</div>

<script>
const teams = [
  "Man City",
  "Arsenal",
  "Liverpool",
  "Chelsea",
  "Man United",
  "Tottenham"
];

function generateMatches() {
  let matches = [];
  let day = 1;

  for (let r = 0; r < 3; r++) {
    for (let i = 0; i < teams.length; i++) {
      for (let j = i + 1; j < teams.length; j++) {
        matches.push({
          day,
          home: teams[i],
          away: teams[j],
          hs: "",
          as: ""
        });
        if (matches.filter(m => m.day === day).length === 6) day++;
      }
    }
  }
  return matches;
}

let matches = JSON.parse(localStorage.getItem("matches")) || generateMatches();
localStorage.setItem("matches", JSON.stringify(matches));

function renderProgram() {
  const box = document.getElementById("programList");
  box.innerHTML = "";
  let currentDay = 0;

  matches.forEach((m, i) => {
    if (m.day !== currentDay) {
      currentDay = m.day;
      box.innerHTML += `<h3>Day ${currentDay}</h3>`;
    }

    box.innerHTML += `
      <div class="match">
        ${m.home}
        <input value="${m.hs}" onchange="updateScore(${i},this.value,true)">
        -
        <input value="${m.as}" onchange="updateScore(${i},this.value,false)">
        ${m.away}
      </div>`;
  });
}

function updateScore(i,val,isHome) {
  if (isHome) matches[i].hs = val;
  else matches[i].as = val;
  localStorage.setItem("matches", JSON.stringify(matches));
  renderTable();
  renderScorer();
}

function renderTable() {
  let stats = {};
  teams.forEach(t => stats[t]={P:0,W:0,D:0,L:0,GF:0,GA:0,PTS:0});

  matches.forEach(m=>{
    if(m.hs===""||m.as==="") return;
    let h=+m.hs,a=+m.as;
    stats[m.home].P++;
    stats[m.away].P++;
    stats[m.home].GF+=h; stats[m.home].GA+=a;
    stats[m.away].GF+=a; stats[m.away].GA+=h;

    if(h>a){stats[m.home].W++;stats[m.home].PTS+=3;stats[m.away].L++;}
    else if(h<a){stats[m.away].W++;stats[m.away].PTS+=3;stats[m.home].L++;}
    else{stats[m.home].D++;stats[m.away].D++;stats[m.home].PTS++;stats[m.away].PTS++;}
  });

  let arr = Object.entries(stats).sort((a,b)=>b[1].PTS-a[1].PTS||((b[1].GF-b[1].GA)-(a[1].GF-a[1].GA)));
  let body = document.getElementById("tableBody");
  body.innerHTML = "";

  arr.forEach((t,i)=>{
    body.innerHTML += `
    <tr class="${i==0?'champ':i>=4?'relegate':''}">
      <td>${i+1}</td><td>${t[0]}</td>
      <td>${t[1].P}</td><td>${t[1].W}</td><td>${t[1].D}</td><td>${t[1].L}</td>
      <td>${t[1].GF}</td><td>${t[1].GA}</td>
      <td>${t[1].GF-t[1].GA}</td><td>${t[1].PTS}</td>
    </tr>`;
  });
}

function renderScorer() {
  let goals = {};
  teams.forEach(t=>goals[t]=0);
  matches.forEach(m=>{
    if(m.hs!==""&&m.as!==""){
      goals[m.home]+=+m.hs;
      goals[m.away]+=+m.as;
    }
  });
  let arr = Object.entries(goals).sort((a,b)=>b[1]-a[1]);
  let body = document.getElementById("scorerBody");
  body.innerHTML = "";
  arr.forEach((t,i)=>{
    body.innerHTML += `<tr><td>${i+1}</td><td>${t[0]}</td><td>${t[1]}</td></tr>`;
  });
}

function showPage(p) {
  document.querySelectorAll(".page").forEach(x=>x.classList.remove("active"));
  document.getElementById(p).classList.add("active");
  document.querySelectorAll("nav button").forEach(x=>x.classList.remove("active"));
  event.target.classList.add("active");
}

function resetAll() {
  if(confirm("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")){
    localStorage.clear();
    location.reload();
  }
}

renderProgram();
renderTable();
renderScorer();
</script>

</body>
</html>
