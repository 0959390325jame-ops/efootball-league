<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>üèÜ eFootball League</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:sans-serif;margin:0;background:#f4f4f4}
header{background:linear-gradient(90deg,#5a0066,#8b008b);color:#fff;padding:15px;text-align:center;font-size:22px}
nav{display:flex;background:#fff}
nav button{flex:1;padding:12px;border:none;background:#fff;font-size:16px}
nav button.active{border-bottom:3px solid #8b008b;color:#8b008b;font-weight:bold}
section{padding:10px}
.match,.table-row{background:#fff;border-radius:10px;padding:10px;margin-bottom:8px;display:flex;align-items:center;justify-content:space-between}
.team{display:flex;align-items:center;gap:8px;width:40%}
.team img{width:28px}
.score input{width:40px;text-align:center}
button.save{background:#28a745;color:#fff;border:none;padding:6px 10px;border-radius:6px}
button.reset{background:#dc3545;color:#fff;border:none;padding:10px;width:100%;border-radius:10px;margin-top:10px}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{padding:8px;text-align:center;border-bottom:1px solid #ddd;font-size:14px}
th{background:#5a0066;color:#fff}
.champ{background:#d4f8d4}
.releg{background:#ffd6d6}
</style>
</head>
<body>

<header>üèÜ eFootball League</header>

<nav>
  <button id="tabProgram" class="active">‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
  <button id="tabTable">‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
</nav>

<section id="program"></section>
<section id="table" style="display:none"></section>

<script>
const teams = [
 {name:"Man United",logo:"https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.svg"},
 {name:"AC Milan",logo:"https://upload.wikimedia.org/wikipedia/commons/d/d0/Logo_of_AC_Milan.svg"},
 {name:"Atletico Madrid",logo:"https://upload.wikimedia.org/wikipedia/en/f/f4/Atletico_Madrid_2017_logo.svg"},
 {name:"Real Madrid",logo:"https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg"},
 {name:"Marseille",logo:"https://upload.wikimedia.org/wikipedia/commons/d/d8/Olympique_Marseille_logo.svg"},
 {name:"PSG",logo:"https://upload.wikimedia.org/wikipedia/en/a/a7/Paris_Saint-Germain_F.C..svg"}
];

let matches = JSON.parse(localStorage.getItem("matches"));
let table = JSON.parse(localStorage.getItem("table"));

if(!matches){
  matches=[];
  for(let r=0;r<3;r++){
    for(let i=0;i<teams.length;i++){
      for(let j=i+1;j<teams.length;j++){
        matches.push({
          home:teams[i].name,
          away:teams[j].name,
          h:teams[i].logo,
          a:teams[j].logo,
          sh:null,sa:null,saved:false
        });
      }
    }
  }
  localStorage.setItem("matches",JSON.stringify(matches));
}

if(!table){
  table={};
  teams.forEach(t=>{
    table[t.name]={P:0,W:0,D:0,L:0,GF:0,GA:0,GD:0,PTS:0,logo:t.logo};
  });
  localStorage.setItem("table",JSON.stringify(table));
}

function renderProgram(){
  program.innerHTML="";
  matches.forEach((m,i)=>{
    let div=document.createElement("div");
    div.className="match";
    div.innerHTML=`
      <div class="team"><img src="${m.h}">${m.home}</div>
      <div class="score">
        <input type="number" id="h${i}" ${m.saved?"disabled":""} value="${m.sh??""}"> -
        <input type="number" id="a${i}" ${m.saved?"disabled":""} value="${m.sa??""}">
        <button class="save" ${m.saved?"disabled":""}>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
      <div class="team" style="justify-content:flex-end">${m.away}<img src="${m.a}"></div>
    `;
    div.querySelector(".save").onclick=()=>{
      let sh=document.getElementById("h"+i).value;
      let sa=document.getElementById("a"+i).value;
      if(sh===""||sa==="")return;
      m.sh=+sh;m.sa=+sa;m.saved=true;
      updateTable(m);
      localStorage.setItem("matches",JSON.stringify(matches));
      localStorage.setItem("table",JSON.stringify(table));
      renderProgram();renderTable();
    };
    program.appendChild(div);
  });
  let r=document.createElement("button");
  r.className="reset";r.textContent="‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î";
  r.onclick=()=>{localStorage.clear();location.reload()};
  program.appendChild(r);
}

function updateTable(m){
  let h=table[m.home],a=table[m.away];
  h.P++;a.P++;h.GF+=m.sh;h.GA+=m.sa;a.GF+=m.sa;a.GA+=m.sh;
  if(m.sh>m.sa){h.W++;a.L++;h.PTS+=3}
  else if(m.sh<m.sa){a.W++;h.L++;a.PTS+=3}
  else{h.D++;a.D++;h.PTS++;a.PTS++}
  h.GD=h.GF-h.GA;a.GD=a.GF-a.GA;
}

function renderTable(){
  let arr=Object.entries(table).sort((a,b)=>b[1].PTS-a[1].PTS||b[1].GD-a[1].GD);
  let html=`<table>
  <tr><th>#</th><th>‡∏ó‡∏µ‡∏°</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th></tr>`;
  arr.forEach((t,i)=>{
    html+=`<tr class="${i==0?"champ":i>=4?"releg":""}">
    <td>${i+1}</td><td><img src="${t[1].logo}" width="20"> ${t[0]}</td>
    <td>${t[1].P}</td><td>${t[1].W}</td><td>${t[1].D}</td><td>${t[1].L}</td>
    <td>${t[1].GF}</td><td>${t[1].GA}</td><td>${t[1].GD}</td><td>${t[1].PTS}</td></tr>`;
  });
  tableDiv.innerHTML=html+"</table>";
}

const program=document.getElementById("program");
const tableDiv=document.getElementById("table");

tabProgram.onclick=()=>{program.style.display="block";tableDiv.style.display="none";tabProgram.classList.add("active");tabTable.classList.remove("active")}
tabTable.onclick=()=>{program.style.display="none";tableDiv.style.display="block";tabTable.classList.add("active");tabProgram.classList.remove("active")}

renderProgram();renderTable();
</script>
</body>
</html>
