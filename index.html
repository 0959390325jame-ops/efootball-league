<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>eFootball Premier League</title>

<style>
:root{
 --purple:#37003c;
 --green:#00ff85;
}
body{margin:0;font-family:Arial;background:#f4f4f4}
header{background:var(--purple);color:#fff;padding:18px;text-align:center;font-size:24px;font-weight:bold}
nav{display:flex;background:#fff}
nav button{flex:1;padding:14px;border:none;background:#fff;font-size:16px;font-weight:bold}
nav button.active{border-bottom:4px solid var(--green);color:var(--purple)}
section{display:none;padding:12px}
section.active{display:block}

button.main{background:var(--purple);color:#fff;border:none;border-radius:6px;padding:8px 14px}
button.reset{background:#dc3545;color:#fff;border:none;border-radius:6px;padding:8px 14px}

/* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
table{width:100%;border-collapse:collapse;background:#fff;font-size:16px}
th,td{padding:12px;border-bottom:1px solid #ddd;text-align:center}
th{background:#eee}
.leader{background:#d4edda}
.relegation{background:#f8d7da}

/* ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° */
.match{background:#fff;margin:10px 0;padding:12px;border-radius:10px;display:flex;align-items:center;justify-content:space-between}
.team{width:40%;display:flex;align-items:center}
.team img{height:26px;margin-right:6px}
.score input{width:42px;font-size:18px;text-align:center}

/* ‡∏ü‡∏≠‡∏£‡πå‡∏° */
.form span{padding:3px 6px;border-radius:4px;color:#fff;margin:1px;font-size:12px}
.W{background:#28a745}
.D{background:#6c757d}
.L{background:#dc3545}
</style>
</head>

<body>

<header>üèÜ eFootball Premier League</header>

<nav>
<button class="active" onclick="show('program')">‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
<button onclick="show('table')">‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
<button onclick="show('scorer')">Top Scorer</button>
</nav>

<section id="program" class="active">
<div style="display:flex;justify-content:space-between;margin-bottom:10px">
<button class="main" onclick="prev()">‚óÄ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
<b id="pageTitle"></b>
<button class="main" onclick="next()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂</button>
</div>
<div id="matches"></div>
<button class="reset" onclick="resetAll()" style="width:100%">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
</section>

<section id="table">
<table>
<thead>
<tr>
<th>#</th><th>‡∏ó‡∏µ‡∏°</th><th>P</th><th>W</th><th>D</th><th>L</th>
<th>GF</th><th>GA</th><th>GD</th><th>Pts</th><th>‡∏ü‡∏≠‡∏£‡πå‡∏°</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</section>

<section id="scorer">
<table>
<thead><tr><th>#</th><th>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th><th>‡∏ó‡∏µ‡∏°</th><th>‡∏õ‡∏£‡∏∞‡∏ï‡∏π</th></tr></thead>
<tbody id="scorerBody"></tbody>
</table>
<button class="main" onclick="addScorer()" style="width:100%;margin-top:10px">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
</section>

<script>
const teams=[
"Real Madrid","Manchester United","Olympique de Marseille",
"Atletico Madrid","AC Milan","Paris Saint-Germain"
];

const logos={
"Real Madrid":"https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg",
"Manchester United":"https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.svg",
"Olympique de Marseille":"https://upload.wikimedia.org/wikipedia/en/2/27/Olympique_Marseille_logo.svg",
"Atletico Madrid":"https://upload.wikimedia.org/wikipedia/en/f/f4/Atletico_Madrid_2017_logo.svg",
"AC Milan":"https://upload.wikimedia.org/wikipedia/commons/d/d0/Logo_of_AC_Milan.svg",
"Paris Saint-Germain":"https://upload.wikimedia.org/wikipedia/en/a/a7/Paris_Saint-Germain_F.C..svg"
};

/* -------- ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏ö‡∏ö Matchday ‡∏à‡∏£‡∏¥‡∏á -------- */
function roundRobin(list){
 let arr=[...list];
 if(arr.length%2)arr.push(null);
 let rounds=[];
 for(let i=0;i<arr.length-1;i++){
  let pairs=[];
  for(let j=0;j<arr.length/2;j++){
   let a=arr[j],b=arr[arr.length-1-j];
   if(a&&b)pairs.push({home:i%2?a:b,away:i%2?b:a,score:""});
  }
  rounds.push(pairs);
  arr.splice(1,0,arr.pop());
 }
 return rounds;
}

function genFixtures(){
 let base=roundRobin(teams);
 let all=[];
 for(let r=0;r<3;r++){
  base.forEach(day=>{
   all.push(day.map(m=>({...m,home:r%2?m.away:m.home,away:r%2?m.home:m.away})));
  });
 }
 return all;
}

let pages=JSON.parse(localStorage.getItem("pages"))||genFixtures();
let scorers=JSON.parse(localStorage.getItem("scorers"))||[];
let page=0;

function save(){
 localStorage.setItem("pages",JSON.stringify(pages));
 localStorage.setItem("scorers",JSON.stringify(scorers));
}

/* -------- ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° -------- */
function renderProgram(){
 document.getElementById("pageTitle").innerText=`Matchday ${page+1}/${pages.length}`;
 const box=document.getElementById("matches");
 box.innerHTML="";
 pages[page].forEach((m,i)=>{
  box.innerHTML+=`
  <div class="match">
   <div class="team"><img src="${logos[m.home]}">${m.home}</div>
   <div class="score">
    <input value="${m.score.split('-')[0]||''}" onchange="setScore(${i},0,this.value)"> -
    <input value="${m.score.split('-')[1]||''}" onchange="setScore(${i},1,this.value)">
   </div>
   <div class="team" style="justify-content:flex-end"><img src="${logos[m.away]}">${m.away}</div>
  </div>`;
 });
}

function setScore(i,s,v){
 let sp=pages[page][i].score.split("-");
 sp[s]=v;
 pages[page][i].score=sp.join("-");
 save(); renderTable();
}

/* -------- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -------- */
function renderTable(){
 let st={},form={};
 teams.forEach(t=>st[t]={P:0,W:0,D:0,L:0,GF:0,GA:0});
 pages.flat().forEach(day=>{
  day.forEach(m=>{
   let [h,a]=m.score.split("-").map(Number);
   if(isNaN(h)||isNaN(a))return;
   let H=st[m.home],A=st[m.away];
   H.P++;A.P++;H.GF+=h;H.GA+=a;A.GF+=a;A.GA+=h;
   if(h>a){H.W++;A.L++;(form[m.home]=form[m.home]||[]).push("W");(form[m.away]=form[m.away]||[]).push("L")}
   else if(h<a){A.W++;H.L++;(form[m.away]=form[m.away]||[]).push("W");(form[m.home]=form[m.home]||[]).push("L")}
   else{H.D++;A.D++;(form[m.home]=form[m.home]||[]).push("D");(form[m.away]=form[m.away]||[]).push("D")}
  });
 });
 let arr=Object.keys(st).map(t=>({...st[t],team:t,GD:st[t].GF-st[t].GA,Pts:st[t].W*3+st[t].D,form:(form[t]||[]).slice(-5)}));
 arr.sort((a,b)=>b.Pts-a.Pts||b.GD-a.GD);
 const tb=document.getElementById("tableBody");
 tb.innerHTML="";
 arr.forEach((t,i)=>{
  tb.innerHTML+=`
  <tr class="${i==0?'leader':i>=arr.length-2?'relegation':''}">
   <td>${i+1}</td>
   <td style="text-align:left"><img src="${logos[t.team]}"> ${t.team}</td>
   <td>${t.P}</td><td>${t.W}</td><td>${t.D}</td><td>${t.L}</td>
   <td>${t.GF}</td><td>${t.GA}</td><td>${t.GD}</td><td>${t.Pts}</td>
   <td class="form">${t.form.map(f=>`<span class="${f}">${f}</span>`).join("")}</td>
  </tr>`;
 });
}

/* -------- Top Scorer -------- */
function renderScorer(){
 const sb=document.getElementById("scorerBody");
 sb.innerHTML="";
 scorers.sort((a,b)=>b.goals-a.goals);
 scorers.forEach((s,i)=>{
  sb.innerHTML+=`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.team}</td><td>${s.goals}</td></tr>`;
 });
}

function addScorer(){
 let name=prompt("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô");
 let team=prompt("‡∏ó‡∏µ‡∏°");
 let goals=prompt("‡∏õ‡∏£‡∏∞‡∏ï‡∏π");
 if(!name||!team||!goals)return;
 scorers.push({name,team,goals:Number(goals)});
 save(); renderScorer();
}

/* -------- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï -------- */
function resetAll(){
 if(!confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?"))return;
 localStorage.clear();
 location.reload();
}

/* -------- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -------- */
function prev(){if(page>0){page--;renderProgram();}}
function next(){if(page<pages.length-1){page++;renderProgram();}}

function show(id){
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
 event.target.classList.add("active");
 renderTable(); renderScorer();
}

renderProgram();renderTable();renderScorer();
</script>

</body>
</html>
